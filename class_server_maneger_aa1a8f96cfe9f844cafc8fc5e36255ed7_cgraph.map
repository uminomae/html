<map id="ServerManeger::runServerLoop" name="ServerManeger::runServerLoop">
<area shape="rect" id="Node000001" title="サーバーのメインループを実行します。" alt="" coords="5,660,207,686"/>
<area shape="rect" id="Node000002" href="$class_network_service.html#a79b34078f8a4e6c978ab8fae8e4769db" title="poll()を使用してファイルディスクリプタのイベントを待ちます。" alt="" coords="274,537,456,563"/>
<area shape="poly" id="edge1_Node000001_Node000002" title=" " alt="" coords="122,657,178,616,215,593,254,573,274,565,276,570,256,578,217,597,181,620,125,661"/>
<area shape="rect" id="Node000003" href="$class_network_service.html#afc2ce78b98367413538d7d84537b867e" title="すべてのクライアントソケットからのリクエストを処理します。" alt="" coords="269,587,461,628"/>
<area shape="poly" id="edge2_Node000001_Node000003" title=" " alt="" coords="159,657,266,630,267,635,160,662"/>
<area shape="rect" id="Node000048" href="$class_network_service.html#a8849b9c719cb649dbbbae76d9981da7c" title="クライアントへの応答を処理します。" alt="" coords="270,652,460,693"/>
<area shape="poly" id="edge32_Node000001_Node000048" title=" " alt="" coords="207,670,254,670,254,675,207,675"/>
<area shape="rect" id="Node000051" href="$class_network_service.html#a79b80b9a51d73a85bb99b0ac0560a0c4" title="全てのサーバーsocket(port)でPOLLINフラグをチェックします" alt="" coords="266,747,464,788"/>
<area shape="poly" id="edge37_Node000001_Node000051" title=" " alt="" coords="144,684,294,739,292,744,143,689"/>
<area shape="rect" id="Node000060" href="$class_server_maneger.html#a104f42d342bf9d6af9c45c200d22facd" title="サーバーのループを再起動します。" alt="" coords="255,872,475,898"/>
<area shape="poly" id="edge45_Node000001_Node000060" title=" " alt="" coords="124,684,256,797,336,860,332,864,253,802,120,688"/>
<area shape="rect" id="Node000004" href="$class_network_service.html#a16ed9bd4de8e026601eca26611647507" title="ソケットを閉じ、関連するリソースをクリーンアップします。" alt="" coords="540,595,716,636"/>
<area shape="poly" id="edge3_Node000003_Node000004" title=" " alt="" coords="461,608,524,610,524,615,461,613"/>
<area shape="rect" id="Node000006" href="$class_network_service.html#a1b6605ad0ddb71f1fc7a87ff616cf872" title="クライアントのHTTPセッションを実行します。" alt="" coords="527,403,729,444"/>
<area shape="poly" id="edge5_Node000003_Node000006" title=" " alt="" coords="451,584,473,573,524,526,594,453,598,457,528,530,477,578,453,589"/>
<area shape="rect" id="Node000047" href="$class_network_service.html#a7101de80b1b3b348f2012246c598b0e4" title="引数のイテレータがサーバーソケットを指しているかどうかを判断します。" alt="" coords="535,545,720,571"/>
<area shape="poly" id="edge31_Node000003_Node000047" title=" " alt="" coords="460,587,540,572,541,577,461,592"/>
<area shape="rect" id="Node000005" href="$class_network_service.html#a648626623792dd4752c1daaffe876ffc" title="指定されたソケットの接続を閉じます。" alt="" coords="780,603,1000,628"/>
<area shape="poly" id="edge4_Node000004_Node000005" title=" " alt="" coords="716,613,765,613,765,618,716,618"/>
<area shape="rect" id="Node000007" href="$class_http_workflow_manager.html#a09d2f69d56764717d9c9f65192ab6737" title="HTTPトランザクションの状態に応じたハンドラを実行します。" alt="" coords="798,310,982,350"/>
<area shape="poly" id="edge6_Node000006_Node000007" title=" " alt="" coords="686,400,816,354,818,359,688,405"/>
<area shape="rect" id="Node000008" href="$class_response_str_build_state.html#a983867825b18ab9d9f98ef5b43117a69" title="レスポンスボディを構築します。" alt="" coords="1329,80,1486,121"/>
<area shape="poly" id="edge7_Node000007_Node000008" title=" " alt="" coords="903,308,960,240,1001,203,1046,172,1113,143,1183,123,1251,110,1313,103,1313,108,1252,115,1184,128,1114,148,1049,176,1004,207,964,244,908,311"/>
<area shape="rect" id="Node000011" href="$class_response_str_build_state.html#ad33030a4db24275b7349a8b0753ba6e9" title="レスポンスヘッダを構築します。" alt="" coords="1329,10,1486,50"/>
<area shape="poly" id="edge10_Node000007_Node000011" title=" " alt="" coords="893,309,908,254,937,181,958,142,982,106,1012,73,1046,47,1078,30,1111,18,1181,5,1250,4,1313,9,1313,14,1250,9,1182,11,1112,23,1080,35,1049,51,1015,77,986,109,962,145,942,183,913,255,898,310"/>
<area shape="rect" id="Node000013" href="$class_response_str_build_state.html#a2d6e42fa92fd6a33658379e997d77c2e" title="レスポンスのステータスライン(1行目)を構築します。" alt="" coords="1319,146,1496,186"/>
<area shape="poly" id="edge12_Node000007_Node000013" title=" " alt="" coords="910,307,968,258,1006,232,1047,212,1111,191,1178,176,1243,168,1303,164,1303,169,1244,173,1179,182,1112,196,1049,217,1009,237,971,262,914,311"/>
<area shape="rect" id="Node000014" href="$class_http_workflow_manager.html#a0014db595ae6547c54ab46f4f3901ea9" title="有効なファイルパスを探索します。" alt="" coords="1072,276,1223,317"/>
<area shape="poly" id="edge13_Node000007_Node000014" title=" " alt="" coords="982,316,1056,306,1057,311,983,321"/>
<area shape="rect" id="Node000015" href="$class_cgi_execution_state.html#aecf27444a140a66641a2b9a35327fca5" title="CGIが必要である場合にCGIスクリプト実行処理を行います。" alt="" coords="1078,342,1217,382"/>
<area shape="poly" id="edge14_Node000007_Node000015" title=" " alt="" coords="983,339,1063,349,1062,354,982,344"/>
<area shape="rect" id="Node000025" href="$class_content_extraction_state.html#a127f220bca1ccb5923933c272c6cefe0" title="HTTPリクエストに基づいてコンテンツ抽出処理を実行します。" alt="" coords="1069,407,1226,448"/>
<area shape="poly" id="edge16_Node000007_Node000025" title=" " alt="" coords="941,349,1049,392,1069,399,1067,404,1047,397,939,354"/>
<area shape="rect" id="Node000027" href="$class_file_path_generation_state.html#a4ee6c300ff2d365526e49a3a32cf0f11" title="HTTPリクエストに基づいてファイルパス生成処理を実行します。" alt="" coords="1066,472,1229,513"/>
<area shape="poly" id="edge19_Node000007_Node000027" title=" " alt="" coords="913,349,971,402,1009,431,1049,457,1061,463,1059,468,1046,462,1006,436,968,406,909,353"/>
<area shape="rect" id="Node000028" href="$class_header_parser_stream.html#a231d52a867b447e6cc8ebbe415d855bb" title="データを逐次的に読み取りながら解析します。" alt="" coords="1076,538,1219,578"/>
<area shape="poly" id="edge20_Node000007_Node000028" title=" " alt="" coords="905,350,927,387,960,433,1001,481,1049,523,1063,531,1061,536,1046,527,997,485,956,436,923,390,900,352"/>
<area shape="rect" id="Node000036" href="$class_identify_location_state.html#aa290323ea9d092dfced1ecef61f21a4c" title="クライアントのリクエストURIに基づいて適切なサーバーとロケーションを識別しセットします。" alt="" coords="1075,603,1220,644"/>
<area shape="poly" id="edge22_Node000007_Node000036" title=" " alt="" coords="901,350,920,399,951,463,994,530,1020,561,1049,588,1062,597,1059,601,1046,592,1016,565,990,533,946,465,915,401,896,352"/>
<area shape="rect" id="Node000040" href="$class_parsing_body_state.html#a84c05e6122297eb58e0863755934ba79" title="HTTPリクエストの解析を行います。" alt="" coords="1061,227,1234,252"/>
<area shape="poly" id="edge24_Node000007_Node000040" title=" " alt="" coords="936,307,1047,262,1073,254,1074,259,1049,267,937,312"/>
<area shape="rect" id="Node000046" href="$class_response_str_build_state.html#aab058472aeb563041e918bed4c5c3b17" title="クライアントにsend()するレスポンスメッセージを構築します。" alt="" coords="1069,60,1226,101"/>
<area shape="poly" id="edge27_Node000007_Node000046" title=" " alt="" coords="899,308,921,268,954,217,996,164,1046,117,1063,106,1066,111,1049,122,1000,168,959,220,926,271,904,310"/>
<area shape="rect" id="Node000009" href="$class_util_http_processing_step.html#a21282f874e910a6bbb63719d6199efe6" title="404や500など、ステータスコードに対応するエラーページの内容を返します。" alt="" coords="1604,80,1762,121"/>
<area shape="poly" id="edge8_Node000008_Node000009" title=" " alt="" coords="1486,98,1588,98,1588,103,1486,103"/>
<area shape="rect" id="Node000010" href="$class_util_http_processing_step.html#ab9931d09caf710018e021acf13e11e93" title="レスポンスボディを設定し、その長さに基づいてレスポンスのContent&#45;Lengthヘッダーを設定します。" alt="" coords="1604,276,1762,317"/>
<area shape="poly" id="edge9_Node000008_Node000010" title=" " alt="" coords="1487,116,1521,132,1563,162,1601,196,1659,262,1655,266,1597,200,1559,166,1518,136,1485,121"/>
<area shape="rect" id="Node000012" href="$class_response_str_build_state.html#a02838bcf03951383fff1f024c91bc109" title=" " alt="" coords="1567,10,1799,50"/>
<area shape="poly" id="edge11_Node000011_Node000012" title=" " alt="" coords="1486,27,1552,27,1552,33,1486,33"/>
<area shape="rect" id="Node000016" href="$class_cgi_execution_state.html#ac2ce6937814bad9d326cb72e28457bdd" title="CGIスクリプトを子プロセスで実行します。" alt="" coords="1302,342,1512,382"/>
<area shape="poly" id="edge15_Node000015_Node000016" title=" " alt="" coords="1217,359,1286,359,1286,365,1217,365"/>
<area shape="rect" id="Node000026" href="$class_content_extraction_state.html#a565b31e0c01130f683c56168e772a12d" title="ファイルの内容をHTTPレスポンスボディに読み込みます。" alt="" coords="1295,407,1519,448"/>
<area shape="poly" id="edge17_Node000025_Node000026" title=" " alt="" coords="1227,425,1279,425,1279,430,1227,430"/>
<area shape="poly" id="edge18_Node000026_Node000010" title=" " alt="" coords="1486,404,1518,392,1583,358,1639,323,1641,328,1585,363,1520,397,1488,409"/>
<area shape="rect" id="Node000029" href="$class_header_parser_stream.html#a976623c54d7466c2e0b36bc2187f7479" title="ソケットからメッセージを受信します。" alt="" coords="1336,538,1479,578"/>
<area shape="poly" id="edge21_Node000028_Node000029" title=" " alt="" coords="1220,555,1320,555,1320,561,1220,561"/>
<area shape="rect" id="Node000037" href="$class_identify_location_state.html#a5c4f6cc671ed7dad98dd5fa58feae69c" title="クライアントのリクエストURIに基づいて適切な LocationDirective を識別します。" alt="" coords="1297,603,1518,644"/>
<area shape="poly" id="edge23_Node000036_Node000037" title=" " alt="" coords="1220,621,1281,621,1281,626,1220,626"/>
<area shape="rect" id="Node000041" href="$class_parsing_body_state.html#a0f773ef745b2d1d6926a02a14be8623f" title="リクエストURIから拡張子を抽出します。" alt="" coords="1303,211,1511,252"/>
<area shape="poly" id="edge25_Node000040_Node000041" title=" " alt="" coords="1234,234,1287,232,1287,238,1234,239"/>
<area shape="rect" id="Node000042" href="$class_parsing_body_state.html#a869dc59d24bb341260124ce9b9a31f24" title="URIから&quot;.cgi&quot;が存在する場合、その後に続くpathinfoとクエリ文字列を抽出します" alt="" coords="1310,276,1505,317"/>
<area shape="poly" id="edge26_Node000040_Node000042" title=" " alt="" coords="1210,250,1298,270,1296,275,1208,256"/>
<area shape="poly" id="edge28_Node000046_Node000008" title=" " alt="" coords="1227,84,1313,91,1313,96,1226,90"/>
<area shape="poly" id="edge29_Node000046_Node000011" title=" " alt="" coords="1226,63,1313,46,1314,51,1227,68"/>
<area shape="poly" id="edge30_Node000046_Node000013" title=" " alt="" coords="1206,99,1296,130,1321,138,1320,143,1294,135,1205,104"/>
<area shape="poly" id="edge33_Node000048_Node000004" title=" " alt="" coords="460,649,524,635,525,641,461,655"/>
<area shape="poly" id="edge34_Node000048_Node000047" title=" " alt="" coords="450,650,473,637,488,624,497,610,506,595,521,581,533,575,536,580,525,586,510,599,501,613,492,627,477,642,453,654"/>
<area shape="rect" id="Node000049" href="$class_network_service.html#af9cd04add0e426e95a9fc680b06db23e" title="クライアントソケットへの応答メッセージを送信します。" alt="" coords="523,660,732,686"/>
<area shape="poly" id="edge35_Node000048_Node000049" title=" " alt="" coords="460,670,508,670,508,675,460,675"/>
<area shape="rect" id="Node000050" href="$class_network_service.html#aa2dc5eec9dfb61797bd77abf5a44a218" title="クライアントのリクエストヘッダーに &quot;Connection: keep&#45;alive&quot; が存在するか確認します。" alt="" coords="533,710,723,750"/>
<area shape="poly" id="edge36_Node000048_Node000050" title=" " alt="" coords="461,691,518,703,516,709,460,696"/>
<area shape="rect" id="Node000052" href="$class_network_service.html#a18b7f72724577a0fba37802fb36d8e7d" title="新しいクライアント接続を受け入れます。" alt="" coords="534,775,722,816"/>
<area shape="poly" id="edge38_Node000051_Node000052" title=" " alt="" coords="465,775,518,781,518,786,464,781"/>
<area shape="rect" id="Node000053" href="$class_network_service.html#a6fecddc50e233048c7e1632913dff0b5" title="新しいソケットを監視リストに追加します。" alt="" coords="1055,791,1240,832"/>
<area shape="poly" id="edge39_Node000052_Node000053" title=" " alt="" coords="722,796,1039,805,1039,811,722,801"/>
<area shape="rect" id="Node000054" href="$class_network_service.html#ae230dece0329581a121b72f4437e0518" title="クライアントの状態をもつクラスのインスタンスを作成し、配列に追加します。" alt="" coords="790,734,990,774"/>
<area shape="poly" id="edge40_Node000052_Node000054" title=" " alt="" coords="722,778,775,770,776,775,723,783"/>
<area shape="rect" id="Node000055" href="$class_network_service.html#a63bbb5ebfaed19591fb547b3f0cfffc5" title="クライアントソケットとリスニングポートのマッピングを設定します。" alt="" coords="799,668,981,709"/>
<area shape="poly" id="edge41_Node000052_Node000055" title=" " alt="" coords="704,772,731,760,745,750,754,740,764,730,779,720,793,713,795,718,782,724,768,734,758,744,748,754,734,764,707,777"/>
<area shape="rect" id="Node000059" href="$class_network_service.html#a34440b127df8820b685c1fd564b0a558" title="指定されたソケットをノンブロッキングモードに設定します。" alt="" coords="803,848,977,889"/>
<area shape="poly" id="edge44_Node000052_Node000059" title=" " alt="" coords="704,814,801,841,799,846,702,819"/>
<area shape="rect" id="Node000056" href="$class_port_mapping.html#af2565580060648e513ff1096677d5d83" title="指定されたサーバーソケットのリッスンポート番号を取得します。" alt="" coords="1058,733,1237,759"/>
<area shape="poly" id="edge42_Node000055_Node000056" title=" " alt="" coords="982,706,1072,727,1071,732,981,712"/>
<area shape="rect" id="Node000058" href="$class_port_mapping.html#a868fe44581e5fcc88863e86a890503cf" title="クライアントソケットとリッスンポートのマッピングを設定します。" alt="" coords="1050,668,1245,709"/>
<area shape="poly" id="edge43_Node000055_Node000058" title=" " alt="" coords="981,686,1034,686,1034,691,981,691"/>
<area shape="rect" id="Node000061" href="$class_network_service.html#a54ae0e59338c8ffd4aabd39866bbf549" title="ネットワークサービスを再起動します。" alt="" coords="524,979,732,1020"/>
<area shape="poly" id="edge46_Node000060_Node000061" title=" " alt="" coords="398,896,566,970,564,975,395,901"/>
<area shape="rect" id="Node000064" href="$class_server_maneger.html#ab5e04aaf80feab4ba0522ab9311cf18f" title="設定ファイルを解析(parse)し、サーバーごとのポートでlistenを行い、pollfdを準備します。" alt="" coords="531,872,725,898"/>
<area shape="poly" id="edge49_Node000060_Node000064" title=" " alt="" coords="475,882,515,882,515,887,475,887"/>
<area shape="rect" id="Node000062" href="$class_network_service.html#a2cf75b7a3d9f4f6ffb04501be4a4f151" title="すべてのソケットの接続を閉じ、関係するデータを削除します。" alt="" coords="802,979,978,1020"/>
<area shape="poly" id="edge47_Node000061_Node000062" title=" " alt="" coords="732,997,786,997,786,1002,732,1002"/>
<area shape="rect" id="Node000063" href="$class_network_service.html#aa669d89eac68ea824c823701a63c6030" title="ネットワークサービスを初期化します。" alt="" coords="796,1044,984,1085"/>
<area shape="poly" id="edge48_Node000061_Node000063" title=" " alt="" coords="713,1018,792,1038,790,1043,712,1023"/>
<area shape="poly" id="edge57_Node000064_Node000059" title=" " alt="" coords="725,876,787,872,787,878,725,882"/>
<area shape="rect" id="Node000065" href="$class_network_service.html#a44006dbf443e41fff6a628d72e356dd3" title=".confのサーバーディレクティブの設定に基づいてセットアップを行います。" alt="" coords="798,914,982,954"/>
<area shape="poly" id="edge50_Node000064_Node000065" title=" " alt="" coords="700,896,783,911,782,917,699,901"/>
<area shape="poly" id="edge51_Node000065_Node000053" title=" " alt="" coords="975,911,998,899,1013,885,1021,871,1030,856,1046,841,1053,837,1056,842,1049,846,1035,859,1026,874,1017,888,1001,903,978,916"/>
<area shape="rect" id="Node000066" href="$class_network_service.html#a76eb3eb24ee923721a827e11d5bf7234" title="サーバーソケットにアドレスをバインドします。" alt="" coords="1061,971,1234,996"/>
<area shape="poly" id="edge52_Node000065_Node000066" title=" " alt="" coords="983,949,1062,964,1061,970,982,954"/>
<area shape="rect" id="Node000067" href="$class_network_service.html#abb307c95e97d912803bff29f67f533ca" title="サーバーアドレスを設定します。" alt="" coords="1060,1020,1235,1061"/>
<area shape="poly" id="edge53_Node000065_Node000067" title=" " alt="" coords="974,953,1001,965,1016,976,1026,986,1035,996,1049,1007,1058,1011,1056,1016,1046,1011,1032,1000,1022,990,1012,980,998,970,972,958"/>
<area shape="rect" id="Node000068" href="$class_network_service.html#acf04155926d7461e63432034869d23b7" title="サーバーソケットを作成します。" alt="" coords="1049,1086,1246,1126"/>
<area shape="poly" id="edge54_Node000065_Node000068" title=" " alt="" coords="983,953,1001,965,1013,979,1021,992,1026,1019,1032,1046,1038,1058,1050,1071,1055,1075,1051,1079,1046,1075,1034,1061,1027,1047,1021,1020,1016,994,1009,982,998,969,980,957"/>
<area shape="rect" id="Node000069" href="$class_network_service.html#a9e89f1cabbeac6f1b6f8fd5c2fdc49df" title="サーバーソケットをリスニング状態に設定します。" alt="" coords="1050,856,1245,882"/>
<area shape="poly" id="edge55_Node000065_Node000069" title=" " alt="" coords="972,911,1078,883,1079,889,974,916"/>
<area shape="rect" id="Node000070" href="$class_port_mapping.html#a35afe8110e08ba6892784a82f9d18161" title="サーバーソケットとリッスンポートのマッピングを設定します。" alt="" coords="1048,906,1247,946"/>
<area shape="poly" id="edge56_Node000065_Node000070" title=" " alt="" coords="982,929,1032,927,1032,932,983,934"/>
</map>
