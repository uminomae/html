<map id="ServerManeger::runServerLoop" name="ServerManeger::runServerLoop">
<area shape="rect" id="Node000001" title="サーバーのメインループを実行します。" alt="" coords="5,642,207,667"/>
<area shape="rect" id="Node000002" href="$class_network_service.html#a79b34078f8a4e6c978ab8fae8e4769db" title="poll()を使用してファイルディスクリプタのイベントを待ちます。" alt="" coords="274,519,456,545"/>
<area shape="poly" id="edge1_Node000001_Node000002" title=" " alt="" coords="122,639,178,597,215,574,254,555,274,547,276,552,256,560,217,579,181,602,125,643"/>
<area shape="rect" id="Node000003" href="$class_network_service.html#afc2ce78b98367413538d7d84537b867e" title="すべてのクライアントソケットからのリクエストを処理します。" alt="" coords="269,569,461,610"/>
<area shape="poly" id="edge2_Node000001_Node000003" title=" " alt="" coords="159,639,266,611,267,616,160,644"/>
<area shape="rect" id="Node000051" href="$class_network_service.html#a8849b9c719cb649dbbbae76d9981da7c" title="クライアントへの応答を処理します。" alt="" coords="270,634,460,675"/>
<area shape="poly" id="edge33_Node000001_Node000051" title=" " alt="" coords="207,652,254,652,254,657,207,657"/>
<area shape="rect" id="Node000054" href="$class_network_service.html#a79b80b9a51d73a85bb99b0ac0560a0c4" title="全てのサーバーsocket(port)でPOLLINフラグをチェックします" alt="" coords="266,729,464,770"/>
<area shape="poly" id="edge38_Node000001_Node000054" title=" " alt="" coords="144,665,294,721,292,726,143,670"/>
<area shape="rect" id="Node000063" href="$class_server_maneger.html#a104f42d342bf9d6af9c45c200d22facd" title="サーバーのループを再起動します。" alt="" coords="255,854,475,879"/>
<area shape="poly" id="edge46_Node000001_Node000063" title=" " alt="" coords="124,666,256,779,336,842,332,846,253,783,120,670"/>
<area shape="rect" id="Node000004" href="$class_network_service.html#a16ed9bd4de8e026601eca26611647507" title="ソケットを閉じ、関連するリソースをクリーンアップします。" alt="" coords="540,528,716,568"/>
<area shape="poly" id="edge3_Node000003_Node000004" title=" " alt="" coords="460,571,524,561,525,567,461,577"/>
<area shape="rect" id="Node000006" href="$class_network_service.html#a1b6605ad0ddb71f1fc7a87ff616cf872" title="クライアントのHTTPセッションを実行します。" alt="" coords="527,393,729,434"/>
<area shape="poly" id="edge5_Node000003_Node000006" title=" " alt="" coords="450,566,474,555,523,511,593,443,597,446,527,515,476,559,453,571"/>
<area shape="rect" id="Node000050" href="$class_network_service.html#a7101de80b1b3b348f2012246c598b0e4" title="引数のイテレータがサーバーソケットを指しているかどうかを判断します。" alt="" coords="535,592,720,618"/>
<area shape="poly" id="edge32_Node000003_Node000050" title=" " alt="" coords="461,592,519,596,519,601,461,598"/>
<area shape="rect" id="Node000005" href="$class_network_service.html#a648626623792dd4752c1daaffe876ffc" title="指定されたソケットの接続を閉じます。" alt="" coords="780,535,1000,561"/>
<area shape="poly" id="edge4_Node000004_Node000005" title=" " alt="" coords="716,545,765,545,765,551,716,551"/>
<area shape="rect" id="Node000007" href="$class_http_workflow_manager.html#a09d2f69d56764717d9c9f65192ab6737" title="HTTPトランザクションの状態に応じたハンドラを実行します。" alt="" coords="798,312,982,352"/>
<area shape="poly" id="edge6_Node000006_Node000007" title=" " alt="" coords="695,390,807,355,808,360,697,395"/>
<area shape="rect" id="Node000008" href="$class_response_str_build_state.html#a21958ec54de1c2b2206854c9cec4c749" title="レスポンスボディを構築します。" alt="" coords="1329,201,1486,242"/>
<area shape="poly" id="edge7_Node000007_Node000008" title=" " alt="" coords="935,308,988,287,1047,268,1116,252,1186,240,1313,225,1313,231,1186,246,1117,258,1048,273,990,292,937,313"/>
<area shape="rect" id="Node000015" href="$class_response_str_build_state.html#a2b42e27ed61acd89b4f47445991861e1" title="レスポンスヘッダを構築します。" alt="" coords="1329,28,1486,68"/>
<area shape="poly" id="edge12_Node000007_Node000015" title=" " alt="" coords="892,310,907,253,935,176,955,136,980,99,1010,65,1046,38,1080,21,1115,11,1152,5,1190,3,1262,8,1326,20,1325,26,1261,13,1190,8,1153,10,1117,16,1082,26,1049,42,1014,69,984,102,960,139,940,178,912,254,898,312"/>
<area shape="rect" id="Node000017" href="$class_response_str_build_state.html#aa2383bb6b46c166581999fb4880efa82" title="レスポンスのステータスライン(1行目)を構築します。" alt="" coords="1319,126,1496,167"/>
<area shape="poly" id="edge14_Node000007_Node000017" title=" " alt="" coords="917,309,975,270,1047,232,1111,208,1178,188,1303,160,1304,165,1180,193,1113,213,1049,237,978,274,920,313"/>
<area shape="rect" id="Node000018" href="$class_http_workflow_manager.html#a0014db595ae6547c54ab46f4f3901ea9" title="有効なファイルパスを探索します。" alt="" coords="1072,593,1223,634"/>
<area shape="poly" id="edge15_Node000007_Node000018" title=" " alt="" coords="905,352,972,473,1014,537,1049,578,1060,585,1057,589,1046,582,1009,540,968,476,900,354"/>
<area shape="rect" id="Node000019" href="$class_cgi_execution_state.html#aecf27444a140a66641a2b9a35327fca5" title="CGIが必要である場合にCGIスクリプト実行処理を行います。" alt="" coords="1078,462,1217,503"/>
<area shape="poly" id="edge16_Node000007_Node000019" title=" " alt="" coords="916,351,974,398,1049,447,1065,454,1063,459,1046,451,971,402,912,355"/>
<area shape="rect" id="Node000029" href="$class_content_extraction_state.html#a127f220bca1ccb5923933c272c6cefe0" title="HTTPリクエストに基づいてコンテンツ抽出処理を実行します。" alt="" coords="1069,397,1226,438"/>
<area shape="poly" id="edge18_Node000007_Node000029" title=" " alt="" coords="953,350,1049,383,1068,389,1066,394,1047,388,951,355"/>
<area shape="rect" id="Node000031" href="$class_file_path_generation_state.html#a4ee6c300ff2d365526e49a3a32cf0f11" title="HTTPリクエストに基づいてファイルパス生成処理を実行します。" alt="" coords="1066,52,1229,92"/>
<area shape="poly" id="edge21_Node000007_Node000031" title=" " alt="" coords="898,310,919,267,951,211,993,153,1019,127,1046,103,1054,98,1057,102,1049,107,1022,130,998,157,955,214,923,269,903,312"/>
<area shape="rect" id="Node000032" href="$class_header_parser_stream.html#a231d52a867b447e6cc8ebbe415d855bb" title="データを逐次的に読み取りながら解析します。" alt="" coords="1076,528,1219,568"/>
<area shape="poly" id="edge22_Node000007_Node000032" title=" " alt="" coords="906,351,962,429,1002,474,1049,512,1063,520,1060,525,1046,517,999,478,958,433,902,354"/>
<area shape="rect" id="Node000040" href="$class_identify_location_state.html#aa290323ea9d092dfced1ecef61f21a4c" title="クライアントのリクエストURIに基づいて適切なサーバーとロケーションを識別しセットします。" alt="" coords="1075,282,1220,323"/>
<area shape="poly" id="edge24_Node000007_Node000040" title=" " alt="" coords="982,319,1059,310,1060,315,983,324"/>
<area shape="rect" id="Node000044" href="$class_parsing_body_state.html#a84c05e6122297eb58e0863755934ba79" title="HTTPリクエストの解析を行います。" alt="" coords="1061,347,1234,373"/>
<area shape="poly" id="edge26_Node000007_Node000044" title=" " alt="" coords="983,339,1046,346,1045,351,982,345"/>
<area shape="rect" id="Node000049" href="$class_response_str_build_state.html#aab058472aeb563041e918bed4c5c3b17" title="クライアントにsend()するレスポンスメッセージを構築します。" alt="" coords="1069,117,1226,158"/>
<area shape="poly" id="edge28_Node000007_Node000049" title=" " alt="" coords="905,309,963,244,1003,207,1046,174,1067,162,1069,167,1049,178,1006,211,967,247,909,313"/>
<area shape="rect" id="Node000009" href="$class_auto_index_state.html#a7802b576a9a7ca2fd2d528b53ffe3934" title="AutoIndex機能を処理します。" alt="" coords="1604,183,1762,209"/>
<area shape="poly" id="edge8_Node000008_Node000009" title=" " alt="" coords="1486,211,1589,202,1589,207,1487,217"/>
<area shape="rect" id="Node000013" href="$class_util_http_processing_step.html#a2981180233e55296d44cbc638401f067" title="404や500など、ステータスコードに対応するエラーページの内容を返します。" alt="" coords="1847,201,2005,242"/>
<area shape="poly" id="edge10_Node000008_Node000013" title=" " alt="" coords="1486,219,1831,219,1831,224,1486,224"/>
<area shape="rect" id="Node000014" href="$class_util_http_processing_step.html#a64ab194d0417e06e6cf8e4d900a83cd2" title="レスポンスボディを設定し、その長さに基づいてContent&#45;Lengthヘッダーを設定します。" alt="" coords="1604,328,1762,368"/>
<area shape="poly" id="edge11_Node000008_Node000014" title=" " alt="" coords="1487,240,1520,252,1583,284,1639,317,1636,321,1581,288,1518,257,1485,245"/>
<area shape="poly" id="edge9_Node000009_Node000013" title=" " alt="" coords="1763,201,1832,209,1831,214,1762,207"/>
<area shape="rect" id="Node000016" href="$class_response_str_build_state.html#a9c2e8b31d65620337f2b9bca860ccaba" title=" " alt="" coords="1567,28,1799,68"/>
<area shape="poly" id="edge13_Node000015_Node000016" title=" " alt="" coords="1486,45,1552,45,1552,51,1486,51"/>
<area shape="rect" id="Node000020" href="$class_cgi_execution_state.html#ac2ce6937814bad9d326cb72e28457bdd" title="CGIスクリプトを子プロセスで実行します。" alt="" coords="1302,462,1512,503"/>
<area shape="poly" id="edge17_Node000019_Node000020" title=" " alt="" coords="1217,480,1286,480,1286,485,1217,485"/>
<area shape="rect" id="Node000030" href="$class_content_extraction_state.html#a565b31e0c01130f683c56168e772a12d" title="ファイルの内容をHTTPレスポンスボディに読み込みます。" alt="" coords="1295,397,1519,438"/>
<area shape="poly" id="edge19_Node000029_Node000030" title=" " alt="" coords="1227,415,1279,415,1279,420,1227,420"/>
<area shape="poly" id="edge20_Node000030_Node000014" title=" " alt="" coords="1491,394,1588,369,1589,374,1492,399"/>
<area shape="rect" id="Node000033" href="$class_header_parser_stream.html#a976623c54d7466c2e0b36bc2187f7479" title="ソケットからメッセージを受信します。" alt="" coords="1336,528,1479,568"/>
<area shape="poly" id="edge23_Node000032_Node000033" title=" " alt="" coords="1220,545,1320,545,1320,551,1220,551"/>
<area shape="rect" id="Node000041" href="$class_identify_location_state.html#a5c4f6cc671ed7dad98dd5fa58feae69c" title="クライアントのリクエストURIに基づいて適切な LocationDirective を識別します。" alt="" coords="1297,266,1518,307"/>
<area shape="poly" id="edge25_Node000040_Node000041" title=" " alt="" coords="1220,295,1281,292,1281,297,1220,301"/>
<area shape="rect" id="Node000045" href="$class_parsing_body_state.html#a0f773ef745b2d1d6926a02a14be8623f" title="リクエストURIから拡張子を抽出します。" alt="" coords="1303,332,1511,372"/>
<area shape="poly" id="edge27_Node000044_Node000045" title=" " alt="" coords="1234,355,1287,353,1287,358,1234,360"/>
<area shape="poly" id="edge29_Node000049_Node000008" title=" " alt="" coords="1214,156,1329,193,1327,198,1212,161"/>
<area shape="poly" id="edge30_Node000049_Node000015" title=" " alt="" coords="1210,114,1246,101,1332,71,1334,76,1248,106,1211,119"/>
<area shape="poly" id="edge31_Node000049_Node000017" title=" " alt="" coords="1227,137,1303,140,1303,145,1226,143"/>
<area shape="poly" id="edge34_Node000051_Node000004" title=" " alt="" coords="447,631,474,619,488,609,497,599,507,588,522,578,532,572,534,577,524,582,510,592,501,602,491,613,476,623,449,636"/>
<area shape="poly" id="edge35_Node000051_Node000050" title=" " alt="" coords="460,634,540,619,541,624,461,639"/>
<area shape="rect" id="Node000052" href="$class_network_service.html#af9cd04add0e426e95a9fc680b06db23e" title="クライアントソケットへの応答メッセージを送信します。" alt="" coords="523,642,732,667"/>
<area shape="poly" id="edge36_Node000051_Node000052" title=" " alt="" coords="460,652,508,652,508,657,460,657"/>
<area shape="rect" id="Node000053" href="$class_network_service.html#aa2dc5eec9dfb61797bd77abf5a44a218" title="クライアントのリクエストヘッダーに &quot;Connection: keep&#45;alive&quot; が存在するか確認します。" alt="" coords="533,692,723,732"/>
<area shape="poly" id="edge37_Node000051_Node000053" title=" " alt="" coords="461,673,518,685,516,690,460,678"/>
<area shape="rect" id="Node000055" href="$class_network_service.html#a18b7f72724577a0fba37802fb36d8e7d" title="新しいクライアント接続を受け入れます。" alt="" coords="534,757,722,798"/>
<area shape="poly" id="edge39_Node000054_Node000055" title=" " alt="" coords="465,757,518,763,518,768,464,762"/>
<area shape="rect" id="Node000056" href="$class_network_service.html#a6fecddc50e233048c7e1632913dff0b5" title="新しいソケットを監視リストに追加します。" alt="" coords="1055,773,1240,814"/>
<area shape="poly" id="edge40_Node000055_Node000056" title=" " alt="" coords="722,777,1039,787,1039,793,722,783"/>
<area shape="rect" id="Node000057" href="$class_network_service.html#ae230dece0329581a121b72f4437e0518" title="クライアントの状態をもつクラスのインスタンスを作成し、配列に追加します。" alt="" coords="790,716,990,756"/>
<area shape="poly" id="edge41_Node000055_Node000057" title=" " alt="" coords="722,760,775,751,776,757,723,765"/>
<area shape="rect" id="Node000058" href="$class_network_service.html#a63bbb5ebfaed19591fb547b3f0cfffc5" title="クライアントソケットとリスニングポートのマッピングを設定します。" alt="" coords="799,650,981,691"/>
<area shape="poly" id="edge42_Node000055_Node000058" title=" " alt="" coords="704,754,731,742,745,732,754,722,764,712,779,702,793,695,795,700,782,706,768,716,758,726,748,736,734,746,707,759"/>
<area shape="rect" id="Node000062" href="$class_network_service.html#a34440b127df8820b685c1fd564b0a558" title="指定されたソケットをノンブロッキングモードに設定します。" alt="" coords="803,830,977,871"/>
<area shape="poly" id="edge45_Node000055_Node000062" title=" " alt="" coords="704,796,801,823,799,828,702,801"/>
<area shape="rect" id="Node000059" href="$class_port_mapping.html#af2565580060648e513ff1096677d5d83" title="指定されたサーバーソケットのリッスンポート番号を取得します。" alt="" coords="1058,658,1237,683"/>
<area shape="poly" id="edge43_Node000058_Node000059" title=" " alt="" coords="981,668,1042,668,1042,673,981,673"/>
<area shape="rect" id="Node000061" href="$class_port_mapping.html#a868fe44581e5fcc88863e86a890503cf" title="クライアントソケットとリッスンポートのマッピングを設定します。" alt="" coords="1050,708,1245,748"/>
<area shape="poly" id="edge44_Node000058_Node000061" title=" " alt="" coords="982,688,1039,701,1038,706,981,693"/>
<area shape="rect" id="Node000064" href="$class_network_service.html#a54ae0e59338c8ffd4aabd39866bbf549" title="ネットワークサービスを再起動します。" alt="" coords="524,961,732,1002"/>
<area shape="poly" id="edge47_Node000063_Node000064" title=" " alt="" coords="398,877,566,952,564,957,395,882"/>
<area shape="rect" id="Node000067" href="$class_server_maneger.html#ab5e04aaf80feab4ba0522ab9311cf18f" title="設定ファイルを解析(parse)し、サーバーごとのポートでlistenを行い、pollfdを準備します。" alt="" coords="531,854,725,879"/>
<area shape="poly" id="edge50_Node000063_Node000067" title=" " alt="" coords="475,864,515,864,515,869,475,869"/>
<area shape="rect" id="Node000065" href="$class_network_service.html#a2cf75b7a3d9f4f6ffb04501be4a4f151" title="すべてのソケットの接続を閉じ、関係するデータを削除します。" alt="" coords="802,961,978,1002"/>
<area shape="poly" id="edge48_Node000064_Node000065" title=" " alt="" coords="732,979,786,979,786,984,732,984"/>
<area shape="rect" id="Node000066" href="$class_network_service.html#aa669d89eac68ea824c823701a63c6030" title="ネットワークサービスを初期化します。" alt="" coords="796,1026,984,1067"/>
<area shape="poly" id="edge49_Node000064_Node000066" title=" " alt="" coords="713,1000,792,1019,790,1024,712,1005"/>
<area shape="poly" id="edge58_Node000067_Node000062" title=" " alt="" coords="725,858,787,854,787,859,725,863"/>
<area shape="rect" id="Node000068" href="$class_network_service.html#a44006dbf443e41fff6a628d72e356dd3" title=".confのサーバーディレクティブの設定に基づいてセットアップを行います。" alt="" coords="798,896,982,936"/>
<area shape="poly" id="edge51_Node000067_Node000068" title=" " alt="" coords="700,877,783,893,782,898,699,883"/>
<area shape="poly" id="edge52_Node000068_Node000056" title=" " alt="" coords="975,893,998,880,1013,867,1022,853,1031,839,1046,824,1056,819,1058,823,1049,829,1035,842,1026,856,1017,870,1001,885,978,897"/>
<area shape="rect" id="Node000069" href="$class_network_service.html#a76eb3eb24ee923721a827e11d5bf7234" title="サーバーソケットにアドレスをバインドします。" alt="" coords="1061,903,1234,929"/>
<area shape="poly" id="edge53_Node000068_Node000069" title=" " alt="" coords="983,913,1045,913,1045,919,983,919"/>
<area shape="rect" id="Node000070" href="$class_network_service.html#abb307c95e97d912803bff29f67f533ca" title="サーバーアドレスを設定します。" alt="" coords="1060,953,1235,994"/>
<area shape="poly" id="edge54_Node000068_Node000070" title=" " alt="" coords="983,934,1045,948,1044,953,982,939"/>
<area shape="rect" id="Node000071" href="$class_network_service.html#acf04155926d7461e63432034869d23b7" title="サーバーソケットを作成します。" alt="" coords="1049,1018,1246,1059"/>
<area shape="poly" id="edge55_Node000068_Node000071" title=" " alt="" coords="978,934,1001,947,1017,961,1026,976,1035,990,1049,1003,1058,1009,1056,1013,1046,1007,1031,993,1022,978,1013,965,998,951,975,939"/>
<area shape="rect" id="Node000072" href="$class_network_service.html#a9e89f1cabbeac6f1b6f8fd5c2fdc49df" title="サーバーソケットをリスニング状態に設定します。" alt="" coords="1050,1083,1245,1109"/>
<area shape="poly" id="edge56_Node000068_Node000072" title=" " alt="" coords="984,935,1001,947,1014,963,1022,979,1026,1010,1030,1040,1037,1054,1050,1069,1055,1073,1051,1077,1046,1072,1033,1057,1025,1042,1021,1011,1016,980,1010,966,998,951,981,939"/>
<area shape="rect" id="Node000073" href="$class_port_mapping.html#a35afe8110e08ba6892784a82f9d18161" title="サーバーソケットとリッスンポートのマッピングを設定します。" alt="" coords="1048,838,1247,879"/>
<area shape="poly" id="edge57_Node000068_Node000073" title=" " alt="" coords="982,893,1038,880,1039,885,983,898"/>
</map>
